scale_y_continuous(labels = scales::percent_format(-1))
?scales::percent_format
ggplot(data = hubei) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "CFR", title = "Case Fatality Rate") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1))
ggplot(data = hubei) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "CFR", title = "Case Fatality Rate") +
scale_y_continuous(labels = scales::percent_format(accuracy = .2))
ggplot(data = hubei) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "CFR", title = "Case Fatality Rate") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1))
ggplot(data = hubei) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "CFR", title = "Case Fatality Rate") +
scale_y_continuous(labels = scales::percent_format(accuracy = .9))
ggplot(data = hubei) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "CFR", title = "Case Fatality Rate") +
scale_y_continuous(labels = scales::percent_format(accuracy = .0))
ggplot(data = hubei) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "CFR", title = "Case Fatality Rate") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1))
ggplot(data = hubei) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "CFR", title = "Case Fatality Rate") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1)) +
theme_light()
ggplot(data = hubei) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "CFR", title = "Case Fatality Rate") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1)) +
theme_bw()
ggplot(data = hubei) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "CFR", title = "Case Fatality Rate") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1)) +
theme_light()
View(confirmed)
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(`Country/Region`, Lat, Long)) %>%
pivot_longer(-`Province/State`,
names_to = "date",
values_to = "confirmed_cum") %>%
rename(province = `Province/State`) %>%
group_by(province) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0))
View(out_china_confirmed)
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China")
View(out_china_confirmed)
View(confirmed)
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(`Province/State`, Lat, Long))
View(out_china_confirmed)
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(`Province/State`, Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country = `Country/Region`) %>%
group_by(country) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0))
View(out_china_confirmed)
china_death <- death %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(`Province/State`, Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "death_cum") %>%
rename(country = `Country/Region`) %>%
group_by(country) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0))
View(china_death)
out_china_death <- death %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(`Province/State`, Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "death_cum") %>%
rename(country = `Country/Region`) %>%
group_by(country) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0))
View(out_china_death)
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country")
) %>%
mutate(date = mdy(date))
View(out_china)
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "Italy" ~ "Italy",
country == "Italy" ~ "Italy",))
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
country == "Singapore" ~ "Singapore",
country == "Japan" ~ "Japan",
TRUE ~ "Other"))
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(`Province/State`, Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country = `Country/Region`) %>%
group_by(country) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0)) %>%
ungroup()
out_china_death <- death %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(`Province/State`, Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "death_cum") %>%
rename(country = `Country/Region`) %>%
group_by(country) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0)) %>%
ungroup()
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
country == "Singapore" ~ "Singapore",
country == "Japan" ~ "Japan",
TRUE ~ "Other"))
View(out_china)
out_china %>% count(country)
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(`Province/State`, Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country = `Country/Region`) %>%
group_by(country) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0)) %>%
ungroup()
out_china_death <- death %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(`Province/State`, Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "death_cum") %>%
rename(country = `Country/Region`) %>%
group_by(country) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0)) %>%
ungroup()
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
country == "Singapore" ~ "Singapore",
country == "Japan" ~ "Japan",
TRUE ~ "Other"))
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
country == "Singapore" ~ "Singapore",
country == "Japan" ~ "Japan",
TRUE ~ "Other"))
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date")
)
View(out_china)
View(out_china_death)
View(out_china_confirmed)
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country")
)
View(out_china)
library(tidylog)
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country")
)
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country = `Country/Region`) %>%
group_by(country) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0)) %>%
ungroup()
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "confirmed_cum")
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Province/State`, `Country/Region`),
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country = `Country/Region`)
View(out_china_confirmed)
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Province/State`, `Country/Region`),
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country = `Country/Region`,
province = `Province/State`) %>%
group_by(country) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0)) %>%
ungroup()
out_china_death <- death %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "death_cum") %>%
rename(country = `Country/Region`,
province = `Province/State`) %>%
group_by(country) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0)) %>%
ungroup()
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country", "province")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
country == "Singapore" ~ "Singapore",
country == "Japan" ~ "Japan",
TRUE ~ "Other"))
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Province/State`, `Country/Region`),
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country = `Country/Region`,
province = `Province/State`) %>%
group_by(country) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0)) %>%
ungroup()
out_china_death <- death %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "death_cum") %>%
rename(country = `Country/Region`,
province = `Province/State`) %>%
group_by(country) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0)) %>%
ungroup()
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country", "province")
)
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Province/State`, `Country/Region`),
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country = `Country/Region`,
province = `Province/State`) %>%
group_by(country) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0)) %>%
ungroup()
out_china_death <- death %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "death_cum") %>%
rename(country = `Country/Region`,
province = `Province/State`) %>%
group_by(country) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0)) %>%
ungroup()
out_china_death <- death %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Province/State`, `Country/Region`),
names_to = "date",
values_to = "death_cum") %>%
rename(country = `Country/Region`,
province = `Province/State`) %>%
group_by(country) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0)) %>%
ungroup()
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country", "province")
)
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country", "province")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
country == "Singapore" ~ "Singapore",
country == "Japan" ~ "Japan",
TRUE ~ "Other"))
View(out_china)
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country", "province")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
country == "Singapore" ~ "Singapore",
country == "Japan" ~ "Japan",
TRUE ~ "Other")) %>%
select(-province)
count(out_china, country)
ggplot(data = out_china) +
geom_line(aes(x = date, y = death_daily)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
glimpse(out_china)
ggplot(data = out_china) +
geom_line(aes(x = date, y = death_daily, col = country)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
out_china1 <- out_china %>%
group_by(date) %>%
summarise(confirmed_cum = sum(confirmed_cum),
confirmed_daily = sum(confirmed_daily),
death_cum = sum(death_cum),
death_daily = sum(death_daily)) %>%
ungroup() %>%
mutate(cfr = death_cum/confirmed_cum)
out_china1 <- out_china %>%
group_by(date) %>%
summarise(confirmed_cum = sum(confirmed_cum),
confirmed_daily = sum(confirmed_daily),
death_cum = sum(death_cum),
death_daily = sum(death_daily),
cfr = death_cum/confirmed_cum) %>%
ungroup()
View(out_china1)
out_china_country <- out_china %>%
group_by(country, date) %>%
summarise(confirmed_cum = sum(confirmed_cum),
confirmed_daily = sum(confirmed_daily),
death_cum = sum(death_cum),
death_daily = sum(death_daily),
cfr = death_cum/confirmed_cum) %>%
ungroup()
ggplot(data = out_china1) +
geom_line(aes(x = date, y = death_daily)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
ggplot(data = out_china1) +
geom_line(aes(x = date, y = confirmed_cum)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
ggplot(data = out_china1) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
ggplot(data = out_china1) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1)) +
theme_light()
ggplot(data = out_china2) +
geom_line(aes(x = date, y = confirmed_daily, col = country)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1)) +
theme_light()
ggplot(data = out_china1) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "", title = "CFR outside China") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1)) +
theme_light()
ggplot(data = out_china2) +
geom_line(aes(x = date, y = confirmed_daily, col = country)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1)) +
theme_light()
ggplot(data = out_china_country) +
geom_line(aes(x = date, y = confirmed_daily, col = country)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1)) +
theme_light()
ggplot(data = out_china_country) +
geom_line(aes(x = date, y = confirmed_daily, col = country)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country", "province")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
country == "Japan" ~ "Japan",
TRUE ~ "Other")) %>%
select(-province)
out_china1 <- out_china %>%
group_by(date) %>%
summarise(confirmed_cum = sum(confirmed_cum),
confirmed_daily = sum(confirmed_daily),
death_cum = sum(death_cum),
death_daily = sum(death_daily),
cfr = death_cum/confirmed_cum) %>%
ungroup()
out_china_country <- out_china %>%
group_by(country, date) %>%
summarise(confirmed_cum = sum(confirmed_cum),
confirmed_daily = sum(confirmed_daily),
death_cum = sum(death_cum),
death_daily = sum(death_daily),
cfr = death_cum/confirmed_cum) %>%
ungroup()
ggplot(data = out_china_country) +
geom_line(aes(x = date, y = confirmed_daily, col = country)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country", "province")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
TRUE ~ "Other")) %>%
select(-province)
out_china1 <- out_china %>%
group_by(date) %>%
summarise(confirmed_cum = sum(confirmed_cum),
confirmed_daily = sum(confirmed_daily),
death_cum = sum(death_cum),
death_daily = sum(death_daily),
cfr = death_cum/confirmed_cum) %>%
ungroup()
out_china_country <- out_china %>%
group_by(country, date) %>%
summarise(confirmed_cum = sum(confirmed_cum),
confirmed_daily = sum(confirmed_daily),
death_cum = sum(death_cum),
death_daily = sum(death_daily),
cfr = death_cum/confirmed_cum) %>%
ungroup()
ggplot(data = out_china_country) +
geom_line(aes(x = date, y = confirmed_daily, col = country)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
View(out_china_country)
