out_china_confirmed,
out_china_death,
by = c("date")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
country == "Singapore" ~ "Singapore",
country == "Japan" ~ "Japan",
TRUE ~ "Other"))
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date")
)
View(out_china)
View(out_china_death)
View(out_china_confirmed)
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country")
)
View(out_china)
library(tidylog)
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country")
)
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country = `Country/Region`) %>%
group_by(country) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0)) %>%
ungroup()
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "confirmed_cum")
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Province/State`, `Country/Region`),
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country = `Country/Region`)
View(out_china_confirmed)
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Province/State`, `Country/Region`),
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country = `Country/Region`,
province = `Province/State`) %>%
group_by(country) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0)) %>%
ungroup()
out_china_death <- death %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "death_cum") %>%
rename(country = `Country/Region`,
province = `Province/State`) %>%
group_by(country) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0)) %>%
ungroup()
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country", "province")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
country == "Singapore" ~ "Singapore",
country == "Japan" ~ "Japan",
TRUE ~ "Other"))
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Province/State`, `Country/Region`),
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country = `Country/Region`,
province = `Province/State`) %>%
group_by(country) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0)) %>%
ungroup()
out_china_death <- death %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "death_cum") %>%
rename(country = `Country/Region`,
province = `Province/State`) %>%
group_by(country) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0)) %>%
ungroup()
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country", "province")
)
out_china_confirmed <- confirmed %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Province/State`, `Country/Region`),
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country = `Country/Region`,
province = `Province/State`) %>%
group_by(country) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0)) %>%
ungroup()
out_china_death <- death %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-`Country/Region`,
names_to = "date",
values_to = "death_cum") %>%
rename(country = `Country/Region`,
province = `Province/State`) %>%
group_by(country) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0)) %>%
ungroup()
out_china_death <- death %>%
filter(`Country/Region` != "Mainland China") %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Province/State`, `Country/Region`),
names_to = "date",
values_to = "death_cum") %>%
rename(country = `Country/Region`,
province = `Province/State`) %>%
group_by(country) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0)) %>%
ungroup()
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country", "province")
)
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country", "province")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
country == "Singapore" ~ "Singapore",
country == "Japan" ~ "Japan",
TRUE ~ "Other"))
View(out_china)
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country", "province")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
country == "Singapore" ~ "Singapore",
country == "Japan" ~ "Japan",
TRUE ~ "Other")) %>%
select(-province)
count(out_china, country)
ggplot(data = out_china) +
geom_line(aes(x = date, y = death_daily)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
glimpse(out_china)
ggplot(data = out_china) +
geom_line(aes(x = date, y = death_daily, col = country)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
out_china1 <- out_china %>%
group_by(date) %>%
summarise(confirmed_cum = sum(confirmed_cum),
confirmed_daily = sum(confirmed_daily),
death_cum = sum(death_cum),
death_daily = sum(death_daily)) %>%
ungroup() %>%
mutate(cfr = death_cum/confirmed_cum)
out_china1 <- out_china %>%
group_by(date) %>%
summarise(confirmed_cum = sum(confirmed_cum),
confirmed_daily = sum(confirmed_daily),
death_cum = sum(death_cum),
death_daily = sum(death_daily),
cfr = death_cum/confirmed_cum) %>%
ungroup()
View(out_china1)
out_china_country <- out_china %>%
group_by(country, date) %>%
summarise(confirmed_cum = sum(confirmed_cum),
confirmed_daily = sum(confirmed_daily),
death_cum = sum(death_cum),
death_daily = sum(death_daily),
cfr = death_cum/confirmed_cum) %>%
ungroup()
ggplot(data = out_china1) +
geom_line(aes(x = date, y = death_daily)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
ggplot(data = out_china1) +
geom_line(aes(x = date, y = confirmed_cum)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
ggplot(data = out_china1) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
ggplot(data = out_china1) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1)) +
theme_light()
ggplot(data = out_china2) +
geom_line(aes(x = date, y = confirmed_daily, col = country)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1)) +
theme_light()
ggplot(data = out_china1) +
geom_line(aes(x = date, y = cfr)) +
labs(x = "", y = "", title = "CFR outside China") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1)) +
theme_light()
ggplot(data = out_china2) +
geom_line(aes(x = date, y = confirmed_daily, col = country)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1)) +
theme_light()
ggplot(data = out_china_country) +
geom_line(aes(x = date, y = confirmed_daily, col = country)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
scale_y_continuous(labels = scales::percent_format(accuracy = .1)) +
theme_light()
ggplot(data = out_china_country) +
geom_line(aes(x = date, y = confirmed_daily, col = country)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country", "province")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
country == "Japan" ~ "Japan",
TRUE ~ "Other")) %>%
select(-province)
out_china1 <- out_china %>%
group_by(date) %>%
summarise(confirmed_cum = sum(confirmed_cum),
confirmed_daily = sum(confirmed_daily),
death_cum = sum(death_cum),
death_daily = sum(death_daily),
cfr = death_cum/confirmed_cum) %>%
ungroup()
out_china_country <- out_china %>%
group_by(country, date) %>%
summarise(confirmed_cum = sum(confirmed_cum),
confirmed_daily = sum(confirmed_daily),
death_cum = sum(death_cum),
death_daily = sum(death_daily),
cfr = death_cum/confirmed_cum) %>%
ungroup()
ggplot(data = out_china_country) +
geom_line(aes(x = date, y = confirmed_daily, col = country)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
out_china <- left_join(
out_china_confirmed,
out_china_death,
by = c("date", "country", "province")
) %>%
mutate(date = mdy(date),
country = case_when(country == "Italy" ~ "Italy",
country == "South Korea" ~ "South Korea",
TRUE ~ "Other")) %>%
select(-province)
out_china1 <- out_china %>%
group_by(date) %>%
summarise(confirmed_cum = sum(confirmed_cum),
confirmed_daily = sum(confirmed_daily),
death_cum = sum(death_cum),
death_daily = sum(death_daily),
cfr = death_cum/confirmed_cum) %>%
ungroup()
out_china_country <- out_china %>%
group_by(country, date) %>%
summarise(confirmed_cum = sum(confirmed_cum),
confirmed_daily = sum(confirmed_daily),
death_cum = sum(death_cum),
death_daily = sum(death_daily),
cfr = death_cum/confirmed_cum) %>%
ungroup()
ggplot(data = out_china_country) +
geom_line(aes(x = date, y = confirmed_daily, col = country)) +
labs(x = "", y = "Cases", title = "Daily confirmed COVID-19 cases") +
theme_light()
View(out_china_country)
install.packages(c("gganimate", "ggforce", "ggraph", "ggthemes", "hrbrthemes", "maps", "patchwork", "sf", "tidygraph"))
knitr::opts_chunk$set(echo = TRUE)
# Assign a value to the variable my_apples
my_apples <- 5
# Fix the assignment of my_oranges
my_oranges <- "6"
# Create the variable my_fruit and print it out
my_fruit <- my_apples + my_oranges
some_vector <- c("John Doe", "poker player")
names(some_vector) <- c("Name", "Profession")
some_vector
# Poker winnings from Monday to Friday
poker_vector <- c(140, -50, 20, -120, 240)
# shankoomee winnings from Monday to Friday
shankoomee_vector <- c(-24, -50, 100, -350, 10)
# The variable days_vector
days_vector <- c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday")
# Assign the names of the day to shankoomee_vector and poker_vector
names(poker_vector) <- days_vector
names(shankoomee_vector) <- days_vector
c(1, 2, 3) + c(4, 5, 6)
c(1 + 4, 2 + 5, 3 + 6)
c(5, 7, 9)
# Poker and shankoomee winnings from Monday to Friday:
poker_vector <- c(140, -50, 20, -120, 240)
shankoomee_vector <- c(-24, -50, 100, -350, 10)
days_vector <- c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday")
names(poker_vector) <- days_vector
names(shankoomee_vector) <- days_vector
# Total winnings with poker
total_poker <- sum(poker_vector)
# Total winnings with shankoomee
total_shankoomee <-  sum(shankoomee_vector)
# Total winnings overall
total_week <- total_poker+total_shankoomee
# Print out total_week
total_week
# Poker and shankoomee winnings from Monday to Friday:
poker_vector <- c(140, -50, 20, -120, 240)
shankoomee_vector <- c(-24, -50, 100, -350, 10)
days_vector <- c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday")
names(poker_vector) <- days_vector
names(shankoomee_vector) <- days_vector
# Calculate total gains for poker and shankoomee
total_poker <- sum(poker_vector)
total_shankoomee <- sum(shankoomee_vector)
# Check if you realized higher total gains in poker than in shankoomee
total_poker > total_shankoomee
?mtcars
mtcars
library(tidyverse)
library(tidylog)
library(lubridate)
library(here)
confirmed <- read_csv(here::here("csse_covid_19_data", "csse_covid_19_time_series", "time_series_19-covid-Confirmed.csv"))
death <- read_csv(here::here("csse_covid_19_data", "csse_covid_19_time_series", "time_series_19-covid-Deaths.csv"))
# Global data ----
View(confirmed)
names(confirmed)
View(confirmed)
confirmed_new <- confirmed %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Country/Region`, `Province/State`),
names_to = "date",
values_to = "confirmed_cum")
View(confirmed_new)
confirmed_new <- confirmed %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Country/Region`, `Province/State`),
names_to = "date",
values_to = "confirmed_cum") %>%
rename(province = `Province/State`) %>%
group_by(province) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0))
View(confirmed_new)
death_new <- death %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Country/Region`, `Province/State`),
names_to = "date",
values_to = "death_cum") %>%
rename(country_region = `Country/Region`,
province_state = `Province/State`) %>%
group_by(province) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0))
confirmed_new <- confirmed %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Country/Region`, `Province/State`),
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country_region = `Country/Region`,
province_state = `Province/State`) %>%
group_by(country_region, province) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0))
death_new <- death %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Country/Region`, `Province/State`),
names_to = "date",
values_to = "death_cum") %>%
rename(country_region = `Country/Region`,
province_state = `Province/State`) %>%
group_by(country_region, province_state) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0))
View(death_new)
covid19 <- left_join(
confirmed_new,
death_new,
by = c("date", "province_state", "country_region")
) %>%
mutate(date = mdy(date))
covid19 <- left_join(
confirmed_new,
death_new,
by = c("date", "province_state", "country_region")
)
confirmed_new <- confirmed %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Country/Region`, `Province/State`),
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country_region = `Country/Region`,
province_state = `Province/State`) %>%
group_by(country_region, province) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0))
confirmed_new <- confirmed %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Country/Region`, `Province/State`),
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country_region = `Country/Region`,
province_state = `Province/State`) %>%
group_by(country_region, province_state) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0))
death_new <- death %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Country/Region`, `Province/State`),
names_to = "date",
values_to = "death_cum") %>%
rename(country_region = `Country/Region`,
province_state = `Province/State`) %>%
group_by(country_region, province_state) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0))
covid19 <- left_join(
confirmed_new,
death_new,
by = c("date", "province_state", "country_region")
) %>%
mutate(date = mdy(date))
View(covid19)
write_csv(covid19, here::here("data", "covid19.csv"))
library(tidyverse)
library(tidylog)
library(lubridate)
library(here)
confirmed <- read_csv(here::here("csse_covid_19_data", "csse_covid_19_time_series", "time_series_19-covid-Confirmed.csv"))
death <- read_csv(here::here("csse_covid_19_data", "csse_covid_19_time_series", "time_series_19-covid-Deaths.csv"))
# Global data ----
confirmed_new <- confirmed %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Country/Region`, `Province/State`),
names_to = "date",
values_to = "confirmed_cum") %>%
rename(country_region = `Country/Region`,
province_state = `Province/State`) %>%
group_by(country_region, province_state) %>%
mutate(confirmed_daily = confirmed_cum - lag(confirmed_cum),
confirmed_daily = replace_na(confirmed_daily, 0))
death_new <- death %>%
select(-c(Lat, Long)) %>%
pivot_longer(-c(`Country/Region`, `Province/State`),
names_to = "date",
values_to = "death_cum") %>%
rename(country_region = `Country/Region`,
province_state = `Province/State`) %>%
group_by(country_region, province_state) %>%
mutate(death_daily = death_cum - lag(death_cum),
death_daily = replace_na(death_daily, 0))
covid19 <- left_join(
confirmed_new,
death_new,
by = c("date", "province_state", "country_region")
) %>%
mutate(date = mdy(date))
write_csv(covid19, here::here("code", "covid19.csv"))
